<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Thoth</title>
        <meta name="description" content="Thoth-Agent resources graphs.">

    </head>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <body>
<!--        <div>-->
<!--            <canvas id="cpu-chart" width="400" height="400"></canvas>-->
<!--        </div>-->
<!--        <div>-->
<!--            <canvas id="disk-chart" width="400" height="400"></canvas>-->
<!--        </div>-->
    <div class="chart-container" style="position: relative; height:720px; width:1280px">
        <canvas id="cpu-chart"></canvas>
    </div>

    <script>
        async function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function loop() {
            const cpuChart = new Chart(document.getElementById('cpu-chart').getContext('2d'), {
                type: 'line',
                responsive: false,
                options: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: 'CPU usage over X last seconds'
                    }
                },
                data: {
                    labels: ["10h10", "10h11", "10h12", "10h13", "10h14", "10h15", "10h16", "10h17", "10h18", "10h19", "10h20"],
                    datasets: [
                        {
                            data: [24, 34, 44,50, 55, 60,90, 92, 70.28, 40.24, 50],
                            label: "Consumed",
                            borderColor: "#3e95cd",
                            fill: false
                        }
                    ]
                },
            });

            for (let i = 0; i < 30; i++) {
                const newData = cpuChart.data.datasets[0].data
                for (const j in newData) {
                    console.log("J = ", j , "newData[j]=", newData[j])
                    newData[j] = newData[j] + i
                }

                cpuChart.data.datasets[0].data = newData
                cpuChart.update()
                await sleep(300)
            }
        }
        loop()
    </script>
</html>